-# = render 'homes/nav', home: @room.home

%h1.sm
  %a.back{href: "#"}>
    %img.svg{alt: "back", src: image_path("icon/back.svg")}/
  = @room.home.name


%section.card.report
  %header
    %h2= @room.name
    %h4= @room.room_type.name if @room.room_type.present?
    %a.head-action{href: "#"}
      %img.svg{alt: "edit", src: image_path("icon/edit.svg")}/
  .readings
    .reading.temp-mid-a
      %span.vis
        %span.loader
      %span.value= display_temperature(@room)
      %span.label Temperature
      %span.time 5 minutes ago
    .reading.hum-mid-a
      %span.vis
        %span.loader
      %span.value= display_humidity(@room)
      %span.label Humidity
      %span.time 5 minutes ago
    .reading.dew-mid
      %span.vis
        %span.loader
      %span.value= display_dewpoint(@room)
      %span.label Dewpoint
      %span.time 5 minutes ago
  .report-card.grade-high
    .rating
      %span.grade= @room.rating
      %span.value=rating_text(@room)
      %span.label Rating
    %ul.check
      - if @room.comfortable?
        %li Comfortable 
      
      - if @room.dry?
        %li Comfortable humidity
        %li Acceptable dewpoint
        %li
          Temp is well above dewpoint
        %a.i.tooltip{href: "#", title: ""}
        %h6 Dewpoint
        %p When the temperature in this room falls below #{display_dewpoint(@room)} moisture begins to form on surfaces, leading to mould growth.
        %p
          %a{href: "#"}
            Click for more info
            %img.svg{alt: "info", src: image_path("icon/i.svg")}/
    %li Room appears healthy, warm,  dry



%section.card
  %header
    %h2 Chart

  = line_chart readings_path(home_id: @room.home.id,
    room_id: @room.id, key: 'temperature', start: @start), legend: false, refresh: 60

%section.card
  %header
    %h2 sensors in this room
  - @room.sensors.each do |sensor|
    .pure-u-1.pure-u-md-1-3.pure-u-lg-1-3
      = render 'sensors/card', sensor: sensor


%section.card
  %header
    %h3 Readings
  %ul.conditions-table-list
    - @readings.each do |reading|
      %li
        = display_reading reading
        = reading.key
        %br
        = timeago_tag reading.created_at, nojs: true, limit: 100.days.ago

