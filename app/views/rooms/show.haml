= render 'homes/nav', home: @home

%h2= @room.name
%h3= @room.room_type&.name

.conditions-tables.pure-g
  .room-analysis-metric.pure-u-1.pure-u-md-1-2.pure-u-lg-1-3
    %div{ class: 'conditions-table conditions-table-' + (@room.too_cold? ? 'bas' : 'good') }
      .conditions-table-header
        %h2 Temperature
        %span.conditions-table-current
          = sprintf "%.2fC", @room.temperature
          %span current temperature
      - if @room.room_type
        This
        = @room.room_type.name
        room should be warmer than
        = @room.room_type.min_temperature
        C
        to be comfortable
      %ul.conditions-table-list
        - if @room.too_cold?
          %li
            Too cold
            = fa_icon "frown-o"
  .pure-u-1.pure-u-md-1-2.pure-u-lg-2-3
    = line_chart readings_path(home_id: @room.home.id,
      room_id: @room.id, key: 'temperature', start: @start), legend: false, refresh: 60

  .room-analysis-metric.pure-u-1.pure-u-md-1-2.pure-u-lg-1-3
    %div{ class: 'conditions-table conditions-table-' + (@room.below_dewpoint? ? 'bad' : 'good') }
      .conditions-table-header
        %h2 Dewpoint
        %span.conditions-table-current
          = sprintf "%.2fC", @room.dewpoint
          %span
            based on
            = sprintf "%.2f%%", @room.humidity
            humidity
      When the temperature in this room falls below
      = sprintf "%.2fC", @room.dewpoint
      moisture begins to form on surfaces, leading to mould growth.
      %ul.conditions-table-list
        - if @room.below_dewpoint?
          %li
            Moisure and mould highly likely
            = fa_icon "warning"
  .pure-u-1.pure-u-md-1-2.pure-u-lg-2-3
    = line_chart readings_path(home_id: @room.home.id,
      room_id: @room.id, key: 'dewpoint', start: @start), legend: false, refresh: 60
