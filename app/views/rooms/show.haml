= render 'homes/nav', home: @home

%h2= @room.name
%h3= @room.room_type&.name

.conditions-tables.pure-g
  .room-analysis-metric.pure-u-1.pure-u-md-1-2.pure-u-lg-1-3
    %div{ class: 'conditions-table conditions-table-' + (@room.too_cold? ? 'bad' : 'good') }
      .conditions-table-header
        %h2 Temperature
        %span.conditions-table-current
          = sprintf "%.2fC", @room.temperature
          %span current temperature
      %ul.conditions-table-list
        %li
          - if @room.too_cold?
            = fa_icon "frown-o"
            Too cold
          - else
            = fa_icon "check"
            Comfortable temperature
        %li
          = sprintf "%.2f%%", @room.humidity
          humidity
      - if @room.room_type
        This
        = @room.room_type.name
        room should be warmer than
        = @room.room_type.min_temperature
        C
        to be comfortable


  .room-analysis-metric.pure-u-1.pure-u-md-1-2.pure-u-lg-1-3
    %div{ class: 'conditions-table conditions-table-' + (@room.below_dewpoint? ? 'bad' : 'good') }
      .conditions-table-header
        %h2 Dewpoint
        %span.conditions-table-current
          = sprintf "%.2fC", @room.dewpoint
          %span
            based on
            = sprintf "%.2f%%", @room.humidity
            humidity
      %ul.conditions-table-list
        %li
          - if @room.below_dewpoint?
            = fa_icon "warning"
            Moisture and mould highly likely
          - else
            = fa_icon "check"
            Above dewpoint
      When the temperature in this room falls below
      = sprintf "%.2fC", @room.dewpoint
      moisture begins to form on surfaces, leading to mould growth.

  .room-analysis-metric.pure-u-1.pure-u-md-1-2.pure-u-lg-1-3
    %div{ class: 'conditions-table conditions-table-' + (@room.good? ? 'good' : 'bad') }
      .conditions-table-header
        %h2 Rating
        %span.conditions-table-current
          = @rating
          %span= @rating_text

  .pure-u-1.pure-u-md-1-1.pure-u-lg-1
    = line_chart readings_path(home_id: @room.home.id,
      room_id: @room.id, key: 'temperature', start: @start), legend: false, refresh: 60
